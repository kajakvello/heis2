package main

import(
	."./Elevator"
	."./Driver"
	"strconv"
)


//TODO: 
// - Lage kostfunksjon
// - Gj√∏re slik at de kan dra i heisen
// - Send Order i loop med alle bestillinger om heis faller ut av nettverket





func main() {
	
	//Initialiser heis
	Init()
	
	equalCost := []string{"147", "150", "140", "155"}
	if len(equalCost) != 0 {
		myAddr, _ := strconv.Atoi("149")
		for i:=0; i<len(equalCost); i++ {
			elevAddr, _ := strconv.Atoi(equalCost[i])
			if elevAddr < myAddr {
				println("lower address: ", elevAddr)
			}
		}
	}
	
	
	go CheckButtonCallUp()
	go CheckButtonCallDown()
	go CheckButtonCommand()
	go RunElevator()
	go UpdateFloor()
	go DoorControl()

	
	go ReceiveMessage()
	go SendUpdateMessage()
	

	s := make(chan int)
	go Stop(s)
	
	select {
	case <- s:
		Elev_set_motor_direction(0)
		break
	} 
}







